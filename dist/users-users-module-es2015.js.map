{"version":3,"sources":["./src/app/pages/users/users.module.ts","./src/app/pages/users/users.component.ts","./src/app/pages/users/users.component.html"],"names":[],"mappings":"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","file":"users-users-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { GeneralModule } from '../../_metronic/partials/content/general/general.module';\r\nimport { UsersComponent } from './users.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgbNavModule, NgbTooltipModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { HighlightModule } from 'ngx-highlightjs';\r\nimport { DataTablesModule } from 'angular-datatables';\r\n@NgModule({\r\n  declarations: [UsersComponent],\r\n  imports: [\r\n    CommonModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    GeneralModule,\r\n    HighlightModule,\r\n    NgbNavModule,\r\n    NgbTooltipModule,\r\n    DataTablesModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: UsersComponent,\r\n      },\r\n    ]),\r\n  ]\r\n})\r\nexport class UsersModule { }\r\n","import { Component, OnInit, OnDestroy, Renderer2, AfterViewInit, ViewChild } from '@angular/core';\r\nimport { UsersService } from \"../../services/users.service\";\r\nimport { Router } from '@angular/router';\r\nimport Swal from 'sweetalert2';\r\nimport { Subject } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { DataTableDirective } from 'angular-datatables';\r\n\r\n@Component({\r\n  selector: 'app-users',\r\n  templateUrl: './users.component.html',\r\n  styleUrls: ['./users.component.scss']\r\n})\r\nexport class UsersComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  dtTrigger = new Subject();\r\n\r\n  @ViewChild(DataTableDirective, {static: false})\r\n  dtElement: DataTableDirective;\r\n\r\n  usersList = [];\r\n  dtOptions: DataTables.Settings = {};\r\n  userId: number;\r\n  rowUserId;\r\n\r\n  constructor(private usersService: UsersService, private router: Router, private renderer: Renderer2) { }\r\n\r\n  ngOnDestroy(): void {\r\n   this.dtTrigger.unsubscribe();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.dtTrigger.next();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    interface Data {\r\n      id;\r\n    }\r\n    this.dtOptions = {\r\n      language:{\r\n        lengthMenu: 'Mostrar _MENU_ registros por página',\r\n        zeroRecords: 'Registros no encontrados',\r\n        info: 'Mostrando página _PAGE_ de _PAGES_',\r\n        infoEmpty: 'Registros no encontrados',\r\n        infoFiltered: '(Filtrando de _MAX_ registros totales)',\r\n        search: 'Buscar',\r\n        paginate:{\r\n          previous: 'Anterior',\r\n          next: 'Siguiente',\r\n          first: 'Primero',\r\n          last: 'Último'\r\n        }\r\n      },\r\n      ajax: environment.sysConfig.apiUrl + 'client-side/users',\r\n      columns: [{\r\n        title: 'Nombre',\r\n        data: 'name'\r\n      }, {\r\n        title: 'Puesto',\r\n        data: 'position'\r\n      }, {\r\n        title: 'Teléfono',\r\n        data: 'phone'\r\n      }, {\r\n        title: 'Correo electrónico',\r\n        data: 'email'\r\n      }, {\r\n        title: 'Segmento',\r\n        data: 'segment_name',\r\n      },{\r\n        title: 'Acciones',\r\n        render(data, type, full){\r\n         return '<button id=\"editBtn\" type=\"button\" class=\"btn btn-primary btn-sm mr-2 edit\"><i class=\"fas fa-edit edit\" style=\"padding-left:5px;\" ></i></button><button type=\"button\" id=\"deleteBtn\" class=\"btn btn-danger btn-sm mr-2\"><i class=\"fa fa-times\" style=\"padding-left:5px;\"></i></button>';\r\n        }\r\n      }\r\n    ],\r\n    rowCallback: (row: Node, data: Data, index: number) => {\r\n      const self = this;\r\n      $('#editBtn', row).on('click', () => {\r\n        this.rowUserId = data.id;\r\n        this.editUserNav(this.rowUserId);\r\n      });\r\n      $('#deleteBtn', row).on('click', () => {\r\n        this.rowUserId = data.id;\r\n        this.deleteUsr(this.rowUserId);\r\n      });\r\n      return row;\r\n    }\r\n    };\r\n    \r\n  }\r\n\r\n  getUsers(){\r\n    this.usersService.users().subscribe(response =>  {\r\n      this.usersList = response.results;\r\n    });\r\n  }\r\n\r\n  editUserNav(userId){\r\n    this.router.navigate(['/edit-user', userId]);\r\n  }\r\n\r\n  deleteUsr(user_id){\r\n    const data = {\r\n      user_id: user_id\r\n    }\r\n    Swal.fire({\r\n      title: 'Confirmar',\r\n      text: \"Esta seguro de borrar este usuario?\",\r\n      showCancelButton: true,\r\n      cancelButtonText: 'Cancelar',\r\n      confirmButtonColor: '#6AA12A',\r\n      cancelButtonColor: '#383838',\r\n      confirmButtonText: 'Si',\r\n      reverseButtons: true,\r\n\r\n    }).then((result) => {\r\n      if(result.isConfirmed === true){\r\n        this.usersService.deleteUser(data).subscribe(response => {\r\n          console.log(response);\r\n          this.rerender();\r\n          if (response.status === 1) {\r\n            Swal.fire(\r\n              'Eliminado',\r\n              'Usuario eliminado',\r\n              'success'\r\n            )\r\n          }else{\r\n            Swal.fire(\r\n              'Error',\r\n              'Algo ocurrio al eliminar el registro',\r\n              'error'\r\n            )\r\n          }\r\n        });\r\n      }else{\r\n        Swal.close();\r\n      }\r\n    })\r\n  }\r\n\r\n  rerender(): void {\r\n    this.dtElement.dtInstance.then((dtInstance: DataTables.Api) => {\r\n      // Destroy the table first\r\n      dtInstance.destroy();\r\n      // Call the dtTrigger to rerender again\r\n      this.dtTrigger.next();\r\n    });\r\n  }\r\n\r\n  \r\n\r\n}\r\n","\r\n    <div class=\"row mb-5\">\r\n        <div class=\"col-lg-6 col-xl-6\">\r\n        </div>\r\n        <div class=\"col-lg-6 col-xl-6\">\r\n          <button class=\"btn btn-success btn-lg float-right\" style=\"background-color: #6AA12A; border-color: #6AA12A;\" routerLink=\"/new-user\" >Nuevo cliente</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <table datatable [dtOptions]=\"dtOptions\" [dtTrigger]=\"dtTrigger\" class=\"table table-striped table-bordered\"></table>\r\n          <!-- <table datatable [dtOptions]=\"dtOptions\"  class=\"table table-striped table-bordered\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Nombre</th>\r\n                <th scope=\"col\">Puesto</th>\r\n                <th scope=\"col\">Teléfono</th>\r\n                <th scope=\"col\">Correo electrónico</th>\r\n                <th scope=\"col\">Segmento</th>\r\n                <th scope=\"col\">Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor=\"let user of usersList; index as i\">\r\n                <td>{{ user.name }}</td>\r\n                <td>{{ user.position }}</td>\r\n                <td>{{ user.phone }}</td>\r\n                <td>{{ user.email }}</td>\r\n                <td>{{ user.segment_name }}</td>\r\n                <td>\r\n                  <button type=\"button\" class=\"btn btn-primary btn-sm mr-2\"><i class=\"fas fa-edit\" style=\"padding-left:5px;\" (click)=\"editUserNav(user.id)\"></i></button>\r\n                  <button type=\"button\" class=\"btn btn-danger btn-sm mr-2\"><i class=\"fa fa-times\" style=\"padding-left:5px;\" (click)=\"deleteUsr(user.id)\"></i></button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table> -->\r\n            <!-- <table class=\"table table-striped table-bordered\">\r\n                <thead>\r\n                <tr>\r\n                  <th scope=\"col\">Nombre</th>\r\n                  <th scope=\"col\">Puesto</th>\r\n                  <th scope=\"col\">Teléfono</th>\r\n                  <th scope=\"col\">Correo electrónico</th>\r\n                  <th scope=\"col\">Segmento</th>\r\n                  <th scope=\"col\">Acciones</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr *ngFor=\"let user of usersList; index as i\">\r\n                  <td>{{ user.name }}</td>\r\n                  <td>{{ user.position }}</td>\r\n                  <td>{{ user.phone }}</td>\r\n                  <td>{{ user.email }}</td>\r\n                  <td>{{ user.segment_name }}</td>\r\n                  <td>\r\n                    <button type=\"button\" class=\"btn btn-primary btn-sm mr-2\"><i class=\"fas fa-edit\" style=\"padding-left:5px;\" (click)=\"editUserNav(user.id)\"></i></button>\r\n                    <button type=\"button\" class=\"btn btn-danger btn-sm mr-2\"><i class=\"fa fa-times\" style=\"padding-left:5px;\" (click)=\"deleteUsr(user.id)\"></i></button>\r\n                  </td>\r\n                </tr>\r\n                </tbody>\r\n              </table> -->\r\n        </div>\r\n      </div>\r\n\r\n\r\n"],"sourceRoot":"webpack:///"}