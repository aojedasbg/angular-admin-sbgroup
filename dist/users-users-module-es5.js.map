{"version":3,"sources":["webpack:///src/app/pages/users/users.module.ts","webpack:///src/app/pages/users/users.component.ts","webpack:///src/app/pages/users/users.component.html"],"names":["UsersModule","forChild","path","component","declarations","imports","UsersComponent","usersService","router","renderer","dtTrigger","usersList","dtOptions","unsubscribe","next","language","lengthMenu","zeroRecords","info","infoEmpty","infoFiltered","search","paginate","previous","first","last","ajax","sysConfig","apiUrl","columns","title","data","render","type","full","rowCallback","row","index","self","$","on","rowUserId","id","editUserNav","deleteUsr","users","subscribe","response","results","userId","navigate","user_id","fire","text","showCancelButton","cancelButtonText","confirmButtonColor","cancelButtonColor","confirmButtonText","reverseButtons","then","result","isConfirmed","deleteUser","console","log","rerender","status","close","dtElement","dtInstance","destroy","selector","templateUrl","styleUrls"],"mappings":"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","file":"users-users-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { GeneralModule } from '../../_metronic/partials/content/general/general.module';\r\nimport { UsersComponent } from './users.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgbNavModule, NgbTooltipModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { HighlightModule } from 'ngx-highlightjs';\r\nimport { DataTablesModule } from 'angular-datatables';\r\n@NgModule({\r\n  declarations: [UsersComponent],\r\n  imports: [\r\n    CommonModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    GeneralModule,\r\n    HighlightModule,\r\n    NgbNavModule,\r\n    NgbTooltipModule,\r\n    DataTablesModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: UsersComponent,\r\n      },\r\n    ]),\r\n  ]\r\n})\r\nexport class UsersModule { }\r\n","import { Component, OnInit, OnDestroy, Renderer2, AfterViewInit, ViewChild } from '@angular/core';\r\nimport { UsersService } from \"../../services/users.service\";\r\nimport { Router } from '@angular/router';\r\nimport Swal from 'sweetalert2';\r\nimport { Subject } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { DataTableDirective } from 'angular-datatables';\r\n\r\n@Component({\r\n  selector: 'app-users',\r\n  templateUrl: './users.component.html',\r\n  styleUrls: ['./users.component.scss']\r\n})\r\nexport class UsersComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  dtTrigger = new Subject();\r\n\r\n  @ViewChild(DataTableDirective, {static: false})\r\n  dtElement: DataTableDirective;\r\n\r\n  usersList = [];\r\n  dtOptions: DataTables.Settings = {};\r\n  userId: number;\r\n  rowUserId;\r\n\r\n  constructor(private usersService: UsersService, private router: Router, private renderer: Renderer2) { }\r\n\r\n  ngOnDestroy(): void {\r\n   this.dtTrigger.unsubscribe();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.dtTrigger.next();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    interface Data {\r\n      id;\r\n    }\r\n    this.dtOptions = {\r\n      language:{\r\n        lengthMenu: 'Mostrar _MENU_ registros por página',\r\n        zeroRecords: 'Registros no encontrados',\r\n        info: 'Mostrando página _PAGE_ de _PAGES_',\r\n        infoEmpty: 'Registros no encontrados',\r\n        infoFiltered: '(Filtrando de _MAX_ registros totales)',\r\n        search: 'Buscar',\r\n        paginate:{\r\n          previous: 'Anterior',\r\n          next: 'Siguiente',\r\n          first: 'Primero',\r\n          last: 'Último'\r\n        }\r\n      },\r\n      ajax: environment.sysConfig.apiUrl + 'client-side/users',\r\n      columns: [{\r\n        title: 'Nombre',\r\n        data: 'name'\r\n      }, {\r\n        title: 'Puesto',\r\n        data: 'position'\r\n      }, {\r\n        title: 'Teléfono',\r\n        data: 'phone'\r\n      }, {\r\n        title: 'Correo electrónico',\r\n        data: 'email'\r\n      }, {\r\n        title: 'Segmento',\r\n        data: 'segment_name',\r\n      },{\r\n        title: 'Acciones',\r\n        render(data, type, full){\r\n         return '<button id=\"editBtn\" type=\"button\" class=\"btn btn-primary btn-sm mr-2 edit\"><i class=\"fas fa-edit edit\" style=\"padding-left:5px;\" ></i></button><button type=\"button\" id=\"deleteBtn\" class=\"btn btn-danger btn-sm mr-2\"><i class=\"fa fa-times\" style=\"padding-left:5px;\"></i></button>';\r\n        }\r\n      }\r\n    ],\r\n    rowCallback: (row: Node, data: Data, index: number) => {\r\n      const self = this;\r\n      $('#editBtn', row).on('click', () => {\r\n        this.rowUserId = data.id;\r\n        this.editUserNav(this.rowUserId);\r\n      });\r\n      $('#deleteBtn', row).on('click', () => {\r\n        this.rowUserId = data.id;\r\n        this.deleteUsr(this.rowUserId);\r\n      });\r\n      return row;\r\n    }\r\n    };\r\n    \r\n  }\r\n\r\n  getUsers(){\r\n    this.usersService.users().subscribe(response =>  {\r\n      this.usersList = response.results;\r\n    });\r\n  }\r\n\r\n  editUserNav(userId){\r\n    this.router.navigate(['/edit-user', userId]);\r\n  }\r\n\r\n  deleteUsr(user_id){\r\n    const data = {\r\n      user_id: user_id\r\n    }\r\n    Swal.fire({\r\n      title: 'Confirmar',\r\n      text: \"Esta seguro de borrar este usuario?\",\r\n      showCancelButton: true,\r\n      cancelButtonText: 'Cancelar',\r\n      confirmButtonColor: '#6AA12A',\r\n      cancelButtonColor: '#383838',\r\n      confirmButtonText: 'Si',\r\n      reverseButtons: true,\r\n\r\n    }).then((result) => {\r\n      if(result.isConfirmed === true){\r\n        this.usersService.deleteUser(data).subscribe(response => {\r\n          console.log(response);\r\n          this.rerender();\r\n          if (response.status === 1) {\r\n            Swal.fire(\r\n              'Eliminado',\r\n              'Usuario eliminado',\r\n              'success'\r\n            )\r\n          }else{\r\n            Swal.fire(\r\n              'Error',\r\n              'Algo ocurrio al eliminar el registro',\r\n              'error'\r\n            )\r\n          }\r\n        });\r\n      }else{\r\n        Swal.close();\r\n      }\r\n    })\r\n  }\r\n\r\n  rerender(): void {\r\n    this.dtElement.dtInstance.then((dtInstance: DataTables.Api) => {\r\n      // Destroy the table first\r\n      dtInstance.destroy();\r\n      // Call the dtTrigger to rerender again\r\n      this.dtTrigger.next();\r\n    });\r\n  }\r\n\r\n  \r\n\r\n}\r\n","\r\n    <div class=\"row mb-5\">\r\n        <div class=\"col-lg-6 col-xl-6\">\r\n        </div>\r\n        <div class=\"col-lg-6 col-xl-6\">\r\n          <button class=\"btn btn-success btn-lg float-right\" style=\"background-color: #6AA12A; border-color: #6AA12A;\" routerLink=\"/new-user\" >Nuevo cliente</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <table datatable [dtOptions]=\"dtOptions\" [dtTrigger]=\"dtTrigger\" class=\"table table-striped table-bordered\"></table>\r\n          <!-- <table datatable [dtOptions]=\"dtOptions\"  class=\"table table-striped table-bordered\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Nombre</th>\r\n                <th scope=\"col\">Puesto</th>\r\n                <th scope=\"col\">Teléfono</th>\r\n                <th scope=\"col\">Correo electrónico</th>\r\n                <th scope=\"col\">Segmento</th>\r\n                <th scope=\"col\">Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor=\"let user of usersList; index as i\">\r\n                <td>{{ user.name }}</td>\r\n                <td>{{ user.position }}</td>\r\n                <td>{{ user.phone }}</td>\r\n                <td>{{ user.email }}</td>\r\n                <td>{{ user.segment_name }}</td>\r\n                <td>\r\n                  <button type=\"button\" class=\"btn btn-primary btn-sm mr-2\"><i class=\"fas fa-edit\" style=\"padding-left:5px;\" (click)=\"editUserNav(user.id)\"></i></button>\r\n                  <button type=\"button\" class=\"btn btn-danger btn-sm mr-2\"><i class=\"fa fa-times\" style=\"padding-left:5px;\" (click)=\"deleteUsr(user.id)\"></i></button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table> -->\r\n            <!-- <table class=\"table table-striped table-bordered\">\r\n                <thead>\r\n                <tr>\r\n                  <th scope=\"col\">Nombre</th>\r\n                  <th scope=\"col\">Puesto</th>\r\n                  <th scope=\"col\">Teléfono</th>\r\n                  <th scope=\"col\">Correo electrónico</th>\r\n                  <th scope=\"col\">Segmento</th>\r\n                  <th scope=\"col\">Acciones</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr *ngFor=\"let user of usersList; index as i\">\r\n                  <td>{{ user.name }}</td>\r\n                  <td>{{ user.position }}</td>\r\n                  <td>{{ user.phone }}</td>\r\n                  <td>{{ user.email }}</td>\r\n                  <td>{{ user.segment_name }}</td>\r\n                  <td>\r\n                    <button type=\"button\" class=\"btn btn-primary btn-sm mr-2\"><i class=\"fas fa-edit\" style=\"padding-left:5px;\" (click)=\"editUserNav(user.id)\"></i></button>\r\n                    <button type=\"button\" class=\"btn btn-danger btn-sm mr-2\"><i class=\"fa fa-times\" style=\"padding-left:5px;\" (click)=\"deleteUsr(user.id)\"></i></button>\r\n                  </td>\r\n                </tr>\r\n                </tbody>\r\n              </table> -->\r\n        </div>\r\n      </div>\r\n\r\n\r\n"]}