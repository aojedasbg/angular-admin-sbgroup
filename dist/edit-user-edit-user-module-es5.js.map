{"version":3,"sources":["webpack:///src/app/pages/edit-user/edit-user.component.ts","webpack:///src/app/pages/edit-user/edit-user.component.html","webpack:///src/app/pages/edit-user/edit-user.module.ts"],"names":["EditUserComponent","usersService","router","activatedRoute","_cdr","user","pic","segmentList","segmentUrlName","urlSplitted","urlSplitArray","editUserForm","name","required","phone","position","url","email","image","selectSegment","whatsappPhone","whatsappMsg","getSegments","params","subscribe","id","getUserInfo","user_id","userDetail","response","patchForm","results","detectChanges","segments","saveData","userInfo","get","value","cardImageBase64","segment_id","whatsappInfo","msg","console","log","updateUser","status","fire","navigate","error","code","basicSegment","filter","segment","replace","toLowerCase","img","a","document","createElement","href","download","click","data","isImageSaved","max_width","patchValue","splitUrl","split","setValue","whatsappMessage","fileInput","imageError","target","files","max_size","allowed_types","max_height","size","type","reader","FileReader","onload","e","Image","src","result","rs","img_height","currentTarget","img_width","imgBase64Path","previewImagePath","getPic","readAsDataURL","save","navigateToUsers","segmentSelect","fileChangeEvent","selector","templateUrl","styleUrls","EditUserModule","forChild","path","component","declarations","imports"],"mappings":"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","file":"edit-user-edit-user-module-es5.js","sourcesContent":["import { Component, OnInit, ChangeDetectorRef} from '@angular/core';\r\nimport { UsersService } from \"../../services/users.service\";\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport Swal from 'sweetalert2'\r\nimport * as _ from 'lodash';\r\n\r\n@Component({\r\n  selector: 'app-edit-user',\r\n  templateUrl: './edit-user.component.html',\r\n  styleUrls: ['./edit-user.component.scss']\r\n})\r\nexport class EditUserComponent implements OnInit {\r\n  user = {\r\n    pic : './assets/media/users/default.jpg'\r\n  };\r\n  id: number;\r\n  userInfo;\r\n  segmentList = [];\r\n  editUserForm: FormGroup;\r\n  basicSegment: string;\r\n  segmentUrlName = '';\r\n  cardImageBase64: string;\r\n  imageError: string;\r\n  isImageSaved: boolean;\r\n  previewImagePath: string;\r\n  splitUrl: string;\r\n  urlSplitted = [];\r\n  urlSplitArray = [];\r\n  saveData: object;\r\n\r\n\r\n  constructor(private usersService: UsersService, private router: Router, private activatedRoute: ActivatedRoute, private _cdr: ChangeDetectorRef) {\r\n    this.editUserForm = new FormGroup({\r\n      name: new FormControl(null,[Validators.required, ]),\r\n      phone: new FormControl(null,[Validators.required,]),\r\n      position: new FormControl(null,[Validators.required, ]),\r\n      url: new FormControl(null,[Validators.required,]),\r\n      email: new FormControl(null,[Validators.required, Validators.email]),\r\n      image: new FormControl(null),\r\n      selectSegment: new FormControl(null,[Validators.required]),\r\n      whatsappPhone: new FormControl(null,[Validators.required, ]),\r\n      whatsappMsg: new FormControl(null,[Validators.required,])\r\n    })\r\n   }\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.getSegments();\r\n    this.activatedRoute.params.subscribe(\r\n      params => {\r\n        this.id = params.id;\r\n        this.getUserInfo(params.id)\r\n      }\r\n    )\r\n  }\r\n\r\n  getUserInfo(user_id){\r\n    this.usersService.userDetail(user_id).subscribe(response => {\r\n      this.patchForm(response.results);\r\n      this._cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  getSegments(){\r\n    this.usersService.segments().subscribe(response => {\r\n      this.segmentList = response.results;\r\n    });\r\n  }\r\n\r\n  save(){\r\n    this.saveData = {\r\n      userInfo:{\r\n        user_id: this.id,\r\n        name: this.editUserForm.get('name').value,\r\n        phone: this.editUserForm.get('phone').value,\r\n        position: this.editUserForm.get('position').value,\r\n        url: this.segmentUrlName + '/' + this.editUserForm.get('url').value+'.html',\r\n        email: this.editUserForm.get('email').value,\r\n        image: this.cardImageBase64,\r\n        segment_id: this.editUserForm.get('selectSegment').value\r\n      },\r\n      whatsappInfo:{\r\n        phone: this.editUserForm.get('whatsappPhone').value,\r\n        msg: this.editUserForm.get('whatsappMsg').value \r\n      }\r\n    }\r\n    console.log(this.editUserForm);\r\n    this.usersService.updateUser(this.saveData).subscribe(response => {\r\n      if(response.status === 1){\r\n        Swal.fire(\r\n          'Éxito',\r\n          'Registro Actualizado',\r\n          'success'\r\n        )\r\n        this.router.navigate(['/users/'])\r\n      }else if(response.error.code === 'ER_DUP_ENTRY'){\r\n        Swal.fire(\r\n          'Error',\r\n          'Ocurrió un problema al guardar al usuario, url ya existe',\r\n          'error'\r\n        )\r\n      }else{\r\n        Swal.fire(\r\n          'Error',\r\n          'Ocurrió un problema al actualizar al usuario',\r\n          'error'\r\n        )\r\n      }\r\n    })\r\n    \r\n  }\r\n\r\n  segmentSelect(){\r\n    this.basicSegment = this.editUserForm.get('selectSegment').value;\r\n    const filter = this.segmentList.filter(segment => segment.id == this.basicSegment);\r\n\r\n   this.segmentUrlName = filter[0].name.replace(/ /g,\"-\");\r\n   this.segmentUrlName = this.segmentUrlName.toLowerCase();\r\n  }\r\n\r\n  getPic(img) {\r\n    //console.log(img);\r\n    if (!img) {\r\n      return 'none';\r\n    }\r\n\r\n    return `url('${img}')`;\r\n  }\r\n\r\n  downloadPic(){\r\n    console.log(this.cardImageBase64);\r\n    var a = document.createElement(\"a\"); //Create <a>\r\n    a.href = this.cardImageBase64; //Image Base64 Goes here\r\n    a.download = \"UserImage\"; //File name Here\r\n    a.click(); //Downloaded file\r\n  }\r\n\r\n  patchForm(data){\r\n    if(data[0].image){\r\n      this.isImageSaved = true\r\n      this.cardImageBase64 = data[0].image;\r\n        const max_width = 25600;\r\n      this.editUserForm.get('image').patchValue('');\r\n    }\r\n    this.splitUrl = data[0].url;\r\n    this.urlSplitArray = this.splitUrl.split('/');\r\n    this.segmentUrlName = this.urlSplitArray[0];\r\n    this.urlSplitted =  this.urlSplitArray[1].split('.')\r\n  \r\n    this.editUserForm.get('name').patchValue(data[0].name);\r\n    this.editUserForm.get('position').patchValue(data[0].position);\r\n    this.editUserForm.get('phone').patchValue(data[0].phone);\r\n    this.editUserForm.get('email').patchValue(data[0].email);\r\n    this.editUserForm.get('selectSegment').setValue(data[0].segment_id);\r\n    this.editUserForm.get('url').patchValue(this.urlSplitted[0]);\r\n    this.editUserForm.get('whatsappPhone').patchValue(data[0].whatsappPhone);\r\n    this.editUserForm.get('whatsappMsg').patchValue(data[0].whatsappMessage);\r\n\r\n \r\n  }\r\n\r\n  fileChangeEvent(fileInput: any) {\r\n    this.imageError = null;\r\n    if (fileInput.target.files && fileInput.target.files[0]) {\r\n        // Size Filter Bytes\r\n        const max_size = 20971520;\r\n        const allowed_types = ['image/png', 'image/jpeg'];\r\n        const max_height = 15200;\r\n        const max_width = 25600;\r\n\r\n        if (fileInput.target.files[0].size > max_size) {\r\n            this.imageError =\r\n                'Maximum size allowed is ' + max_size / 1000 + 'Mb';\r\n\r\n            return false;\r\n        }\r\n\r\n        if (!_.includes(allowed_types, fileInput.target.files[0].type)) {\r\n            this.imageError = 'Only Images are allowed ( JPG | PNG )';\r\n            return false;\r\n        }\r\n        const reader = new FileReader();\r\n        reader.onload = (e: any) => {\r\n            const image = new Image();\r\n            image.src = e.target.result;\r\n            image.onload = rs => {\r\n                const img_height = rs.currentTarget['height'];\r\n                const img_width = rs.currentTarget['width'];\r\n\r\n                //console.log(img_height, img_width);\r\n\r\n\r\n                if (img_height > max_height && img_width > max_width) {\r\n                    this.imageError =\r\n                        'Maximum dimentions allowed ' +\r\n                        max_height +\r\n                        '*' +\r\n                        max_width +\r\n                        'px';\r\n                    return false;\r\n                } else {\r\n                    const imgBase64Path = e.target.result;\r\n                    this.cardImageBase64  = imgBase64Path;\r\n                    // console.log(imgBase64Path);\r\n                    this.isImageSaved = true;\r\n                    this.previewImagePath = imgBase64Path;\r\n                    this.getPic(imgBase64Path);\r\n                    this._cdr.detectChanges();\r\n                }\r\n            };\r\n        };\r\n\r\n        reader.readAsDataURL(fileInput.target.files[0]);\r\n    }\r\n  }\r\n  \r\n  navigateToUsers(){\r\n    this.router.navigate(['/users/']);\r\n  }\r\n}\r\n","<form [formGroup]=\"editUserForm\" (ngSubmit)=\"save()\">\r\n    <ng-container>\r\n      <div class=\"row mb-5\">\r\n        <div class=\"col-lg-6 col-xl-6\">\r\n          <h3 class=\"boldfont-weight-bolder text-dark\"><i class=\"arrow left float-left\" (click)=\"navigateToUsers()\" title=\"Volver\"></i>Editar Usuario</h3>\r\n        </div>\r\n        <div class=\"col-lg-6 col-xl-6\">\r\n          <button class=\"btn btn-success btn-lg float-right\" style=\"background-color: #6AA12A; border-color: #6AA12A;\" [disabled]=\"editUserForm.status === 'INVALID'\" >Guardar</button>\r\n        </div>\r\n        \r\n      </div>\r\n      \r\n      <div class=\"card card-custom \" >      \r\n        <div class=\"card-header py-3\">\r\n          <div class=\"card-title align-items-start flex-column\">\r\n            <h3 class=\"card-label font-weight-bolder text-dark\">Informacion de la cuenta</h3>\r\n          </div>\r\n        </div>\r\n        <!--end::Header-->\r\n        <!--begin::Form-->\r\n        <div class=\"form\">\r\n          <!--begin::Body-->\r\n          <div class=\"card-body\">\r\n            \r\n            <div class=\"form-group row\">\r\n              <label class=\"col-xl-2 col-lg-2 col-form-label font-weight-bold\">Nombre completo:</label>\r\n              <div class=\"col-lg-5 col-xl-4\">\r\n                <input class=\"form-control form-control-lg form-control-solid\"\r\n                  type=\"text\"\r\n                  formControlName=\"name\"\r\n                />\r\n                <ng-container\r\n                  [ngTemplateOutlet]=\"formError\"\r\n                  [ngTemplateOutletContext]=\"{\r\n                    validation: 'required',\r\n                    message: 'Nombre es requerido.',\r\n                    control: editUserForm.controls['name']\r\n                  }\"\r\n                ></ng-container>\r\n              </div>\r\n              <label class=\"col-xl-1 col-lg-1 col-form-label font-weight-bold\">Puesto:</label>\r\n              <div class=\"col-lg-5 col-xl-4\">\r\n                <input class=\"form-control form-control-lg form-control-solid\"\r\n                  type=\"text\"\r\n                  formControlName=\"position\"\r\n                />\r\n                <ng-container\r\n                  [ngTemplateOutlet]=\"formError\"\r\n                  [ngTemplateOutletContext]=\"{\r\n                    validation: 'required',\r\n                    message: 'Puesto es requerido.',\r\n                    control: editUserForm.controls['position']\r\n                  }\"\r\n                ></ng-container>\r\n              </div>\r\n            </div>\r\n            <div class=\"form-group row\">\r\n              <label class=\"col-xl-2 col-lg-2 col-form-label font-weight-bold\">Teléfono:</label>\r\n              <div class=\"col-lg-5 col-xl-4\">\r\n                <input class=\"form-control form-control-lg form-control-solid\"\r\n                  type=\"text\"\r\n                  formControlName=\"phone\"\r\n                />\r\n                <ng-container\r\n                  [ngTemplateOutlet]=\"formError\"\r\n                  [ngTemplateOutletContext]=\"{\r\n                    validation: 'required',\r\n                    message: 'Teléfono es requerido.',\r\n                    control: editUserForm.controls['phone']\r\n                  }\"\r\n                ></ng-container>\r\n              </div>\r\n              <label class=\"col-xl-1 col-lg-1 col-form-label font-weight-bold\">Correo:</label>\r\n              <div class=\"col-lg-5 col-xl-4\">\r\n                <input class=\"form-control form-control-lg form-control-solid\"\r\n                  type=\"text\"\r\n                  formControlName=\"email\"\r\n                />\r\n                <ng-container\r\n                  [ngTemplateOutlet]=\"formError\"\r\n                  [ngTemplateOutletContext]=\"{\r\n                    validation: 'required',\r\n                    message: 'Correo es requerido.',\r\n                    control: editUserForm.controls['email']\r\n                  }\"\r\n                ></ng-container>\r\n              </div>\r\n            </div>\r\n            <div class=\"form-group row\">\r\n              <label class=\"col-xl-2 col-lg-2 col-form-label font-weight-bold\">Segmento:</label>\r\n              <div class=\"col-lg-5 col-xl-4\">\r\n                <select class=\"form-control form-control-lg\" formControlName=\"selectSegment\" (change)=\"segmentSelect()\">\r\n                  <option disabled>Selecciona el segmento</option>\r\n                  <option *ngFor=\"let segment of segmentList\" [ngValue]=\"segment.id\">\r\n                    {{segment.name}}  \r\n                  </option>\r\n                </select>\r\n                <ng-container\r\n                  [ngTemplateOutlet]=\"formError\"\r\n                  [ngTemplateOutletContext]=\"{\r\n                    validation: 'required',\r\n                    message: 'Segmento es requerido.',\r\n                    control: editUserForm.controls['selectSegment']\r\n                  }\"\r\n                ></ng-container>\r\n              </div>\r\n              <label class=\"col-xl-1 col-lg-1 col-form-label font-weight-bold\">URL:</label>\r\n              <label class=\"col-lg-2 col-xl-2 col-form-label\" style=\"padding-right:0px !important; padding-left:0px !important;\">sbgroup.com.mx/{{segmentUrlName}}/</label>\r\n              <div class=\"col-lg-2 col-xl-2\" style=\"padding-right:0px !important; padding-left:0px !important;\">\r\n                <input class=\"form-control form-control-lg form-control-solid\"\r\n                  type=\"text\"\r\n                  formControlName=\"url\"\r\n                />\r\n                <ng-container\r\n                  [ngTemplateOutlet]=\"formError\"\r\n                  [ngTemplateOutletContext]=\"{\r\n                    validation: 'required',\r\n                    message: 'Url es requerido.',\r\n                    control: editUserForm.controls['url']\r\n                  }\"\r\n                ></ng-container>\r\n              </div>\r\n              <label class=\"col-lg-1 col-xl-1 col-form-label\" style=\"padding-right:0px !important; padding-left:0px !important;\">.html</label>\r\n            </div>\r\n            <div class=\"form-group row\">\r\n              <label class=\"col-xl-3 col-lg-3 col-form-label font-weight-bold\">Imagen asesor:</label>\r\n              <div class=\"col-lg-9 col-xl-6\">\r\n                <div class=\"image-input image-input-outline\"\r\n                  id=\"kt_profile_avatar\"\r\n                >\r\n                  <div >\r\n                    <ng-container *ngIf=\"isImageSaved; else elseTemplate\">\r\n                        <img style=\"max-width:200px; height:auto;\" [src]=\"cardImageBase64\" />\r\n                    </ng-container>\r\n                    <ng-template #elseTemplate>\r\n                        <img src=\"./assets/media/users/default.jpg\" style=\"max-width:200px; height:auto;\" class=\"img-responsive\">\r\n                    </ng-template>\r\n                  </div>\r\n                  \r\n                  <label class=\"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow\"\r\n                    data-action=\"change\"\r\n                    data-toggle=\"tooltip\"\r\n                    title=\"\"\r\n                    data-original-title=\"Change avatar\"\r\n                  >\r\n                    <i class=\"fa fa-pen icon-sm text-muted\"></i>\r\n                    <input type=\"file\" name=\"profile_avatar\" formControlName=\"image\" (change)=\"fileChangeEvent($event)\" accept=\".png, .jpg, .jpeg\"  />\r\n                    <input type=\"hidden\" name=\"profile_avatar_remove\"  />\r\n                  </label>\r\n                  <span class=\"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow\"\r\n                    data-action=\"cancel\" data-toggle=\"tooltip\" title=\"\" data-original-title=\"Cancel avatar\">\r\n                    <i class=\"fa fa-download icon-xs text-muted\"></i>\r\n                  </span>\r\n                  <span *ngIf=\"user.pic\"\r\n                    class=\"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow\"\r\n                    (click)=\"downloadPic()\"\r\n                    data-action=\"remove\" data-toggle=\"tooltip\" title=\"\" data-original-title=\"Remove avatar\">\r\n                    <i class=\"fa fa-download icon-xs text-muted\"></i>\r\n                  </span>\r\n                </div>\r\n                <ng-container\r\n                  [ngTemplateOutlet]=\"formError\"\r\n                  [ngTemplateOutletContext]=\"{\r\n                    validation: 'required',\r\n                    message: 'Imagen es requerido.',\r\n                    control: editUserForm.controls['image']\r\n                  }\"\r\n                ></ng-container>\r\n              </div>\r\n            </div>\r\n            \r\n          </div>\r\n          <!--end::Body-->\r\n        \r\n          <div class=\"card-header py-3\">\r\n              <div class=\"card-title align-items-start flex-column\">\r\n              <h3 class=\"card-label font-weight-bolder text-dark\">Mensaje personalizado Whatsapp</h3>\r\n              </div>\r\n          </div>\r\n          <div class=\"card-body\">\r\n              <div class=\"form-group row\">\r\n                  <label class=\"col-xl-2 col-lg-2 col-form-label font-weight-bold\">Número celular:</label>\r\n                  <div class=\"col-lg-5 col-xl-4\">\r\n                  <input class=\"form-control form-control-lg form-control-solid\"\r\n                      type=\"text\"\r\n                      formControlName=\"whatsappPhone\"\r\n                  />\r\n                  <ng-container\r\n                  [ngTemplateOutlet]=\"formError\"\r\n                  [ngTemplateOutletContext]=\"{\r\n                    validation: 'required',\r\n                    message: 'Número de whatsapp es requerido.',\r\n                    control: editUserForm.controls['whatsappPhone']\r\n                  }\"\r\n                ></ng-container>\r\n                  </div>\r\n                  <label class=\"col-xl-1 col-lg-1 col-form-label font-weight-bold\">Mensaje:</label>\r\n                  <div class=\"col-lg-5 col-xl-4\">\r\n                  <textarea class=\"form-control form-control-lg form-control-solid\" id=\"exampleFormControlTextarea1\" rows=\"8\" style=\"resize: none;\" formControlName=\"whatsappMsg\"></textarea>\r\n                  <ng-container\r\n                  [ngTemplateOutlet]=\"formError\"\r\n                  [ngTemplateOutletContext]=\"{\r\n                    validation: 'required',\r\n                    message: 'Mensaje de whatsapp es requerido.',\r\n                    control: editUserForm.controls['whatsappMsg']\r\n                  }\"\r\n                ></ng-container>\r\n                  </div>\r\n              </div>\r\n          </div>\r\n        </div>\r\n        <!--end::Form-->\r\n      </div>\r\n    </ng-container>\r\n  </form>\r\n  \r\n  <ng-template\r\n    #formError\r\n    let-control=\"control\"\r\n    let-message=\"message\"\r\n    let-validation=\"validation\"\r\n  >\r\n    <ng-container\r\n      *ngIf=\"control.hasError(validation) && (control.dirty || control.touched)\"\r\n    >\r\n      <div class=\"fv-plugins-message-container\">\r\n        <div class=\"fv-help-block\">\r\n          {{ message }}\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n  </ng-template>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { GeneralModule } from '../../_metronic/partials/content/general/general.module';\r\nimport { EditUserComponent } from './edit-user.component';\r\nimport { FormsModule, ReactiveFormsModule  } from '@angular/forms';\r\nimport { NgbNavModule, NgbTooltipModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { HighlightModule } from 'ngx-highlightjs';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [EditUserComponent],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    GeneralModule,\r\n    HighlightModule,\r\n    NgbNavModule,\r\n    NgbTooltipModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: EditUserComponent,\r\n      },\r\n    ]),\r\n  ]\r\n})\r\nexport class EditUserModule { }\r\n"]}